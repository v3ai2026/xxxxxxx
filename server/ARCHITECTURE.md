# ğŸ—ï¸ Vision å¾®æœåŠ¡æ¶æ„å›¾

## ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Frontend Client                          â”‚
â”‚                    (React/TypeScript - :5173)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ HTTP/HTTPS
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API Gateway (:9999)                         â”‚
â”‚                    blade-gateway (Spring Cloud Gateway)          â”‚
â”‚  - ç»Ÿä¸€å…¥å£                                                       â”‚
â”‚  - è·¯ç”±è½¬å‘                                                       â”‚
â”‚  - CORS é…ç½®                                                      â”‚
â”‚  - è´Ÿè½½å‡è¡¡                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚        â”‚        â”‚        â”‚        â”‚
         â–¼        â–¼        â–¼        â–¼        â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Auth   â”‚â”‚ User   â”‚â”‚ Project  â”‚â”‚ Payment  â”‚â”‚   ...    â”‚
    â”‚ :8100  â”‚â”‚ :8101  â”‚â”‚ :8102    â”‚â”‚ :8103    â”‚â”‚  :810x   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚        â”‚            â”‚          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   Nacos Registry :8848   â”‚
         â”‚   (æœåŠ¡æ³¨å†Œä¸å‘ç°)         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## è¯¦ç»†æœåŠ¡æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Frontend Layer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                           â”‚
â”‚  React Application (localhost:5173)                      â”‚
â”‚  - TypeScript                                            â”‚
â”‚  - API Client                                            â”‚
â”‚  - State Management                                      â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ REST API / JSON
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Gateway Layer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                           â”‚
â”‚  blade-gateway (:9999)                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Routes:                                          â”‚    â”‚
â”‚  â”‚ /blade-auth/**      â†’ blade-auth                 â”‚    â”‚
â”‚  â”‚ /api/user/**        â†’ vision-user                â”‚    â”‚
â”‚  â”‚ /api/projects/**    â†’ vision-project             â”‚    â”‚
â”‚  â”‚ /api/teams/**       â†’ vision-project             â”‚    â”‚
â”‚  â”‚ /api/api-keys/**    â†’ vision-project             â”‚    â”‚
â”‚  â”‚ /api/payment/**     â†’ vision-payment             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚                       â”‚
        â–¼               â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ blade-auth  â”‚ â”‚ vision-user â”‚        â”‚vision-projectâ”‚
â”‚             â”‚ â”‚             â”‚        â”‚              â”‚
â”‚ :8100       â”‚ â”‚ :8101       â”‚        â”‚ :8102        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚Controllers: â”‚ â”‚Controllers: â”‚        â”‚Controllers:  â”‚
â”‚- Auth       â”‚ â”‚- User       â”‚        â”‚- Project     â”‚
â”‚             â”‚ â”‚             â”‚        â”‚- Team        â”‚
â”‚Services:    â”‚ â”‚Services:    â”‚        â”‚- ApiKey      â”‚
â”‚- Login      â”‚ â”‚- UserMgmt   â”‚        â”‚              â”‚
â”‚- Register   â”‚ â”‚             â”‚        â”‚Services:     â”‚
â”‚- JWT        â”‚ â”‚Entities:    â”‚        â”‚- ProjectSvc  â”‚
â”‚             â”‚ â”‚- User       â”‚        â”‚- TeamSvc     â”‚
â”‚Security:    â”‚ â”‚             â”‚        â”‚- ApiKeySvc   â”‚
â”‚- BCrypt     â”‚ â”‚Mappers:     â”‚        â”‚              â”‚
â”‚- Spring Sec â”‚ â”‚- UserMapper â”‚        â”‚Entities:     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚- Project     â”‚
                                        â”‚- Team        â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚- TeamMember  â”‚
                â”‚vision-paymentâ”‚        â”‚- ApiKey      â”‚
                â”‚              â”‚        â”‚              â”‚
                â”‚ :8103        â”‚        â”‚Mappers:      â”‚
                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚- 4 Mappers   â”‚
                â”‚Controllers:  â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚- Stripe      â”‚
                â”‚              â”‚
                â”‚Services:     â”‚
                â”‚- Checkout    â”‚
                â”‚- Subscriptionâ”‚
                â”‚- Webhook     â”‚
                â”‚              â”‚
                â”‚Integration:  â”‚
                â”‚- Stripe SDK  â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Infrastructure Layer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   Nacos      â”‚        â”‚   PostgreSQL       â”‚        â”‚
â”‚  â”‚   :8848      â”‚        â”‚   (Supabase)       â”‚        â”‚
â”‚  â”‚              â”‚        â”‚                    â”‚        â”‚
â”‚  â”‚ - Registry   â”‚        â”‚ Tables:            â”‚        â”‚
â”‚  â”‚ - Discovery  â”‚        â”‚ - profiles         â”‚        â”‚
â”‚  â”‚ - Config     â”‚        â”‚ - projects         â”‚        â”‚
â”‚  â”‚              â”‚        â”‚ - teams            â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ - team_members     â”‚        â”‚
â”‚                          â”‚ - api_keys         â”‚        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ - subscriptions    â”‚        â”‚
â”‚  â”‚  blade-commonâ”‚        â”‚ - auth.users       â”‚        â”‚
â”‚  â”‚              â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”‚ - JwtUtil    â”‚                                       â”‚
â”‚  â”‚ - R (Result) â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ - Exceptions â”‚        â”‚   Stripe API       â”‚        â”‚
â”‚  â”‚ - Config     â”‚        â”‚                    â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ - Payment          â”‚        â”‚
â”‚                          â”‚ - Webhooks         â”‚        â”‚
â”‚                          â”‚ - Subscriptions    â”‚        â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æœåŠ¡é—´é€šä¿¡æµç¨‹

### 1. ç”¨æˆ·ç™»å½•æµç¨‹

```
Frontend                Gateway              Auth Service         Database
   â”‚                       â”‚                      â”‚                  â”‚
   â”‚ POST /oauth/token     â”‚                      â”‚                  â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚                  â”‚
   â”‚                       â”‚ Forward              â”‚                  â”‚
   â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚
   â”‚                       â”‚                      â”‚ Query user       â”‚
   â”‚                       â”‚                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                       â”‚                      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                       â”‚                      â”‚ Verify password  â”‚
   â”‚                       â”‚                      â”‚ Generate JWT     â”‚
   â”‚                       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚                  â”‚
   â”‚ {token, userId}       â”‚                      â”‚                  â”‚
```

### 2. åˆ›å»ºé¡¹ç›®æµç¨‹

```
Frontend                Gateway            Project Service        Database
   â”‚                       â”‚                      â”‚                  â”‚
   â”‚ POST /api/projects    â”‚                      â”‚                  â”‚
   â”‚ + JWT Token           â”‚                      â”‚                  â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚                  â”‚
   â”‚                       â”‚ Verify JWT           â”‚                  â”‚
   â”‚                       â”‚ Forward              â”‚                  â”‚
   â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚
   â”‚                       â”‚                      â”‚ Extract userId   â”‚
   â”‚                       â”‚                      â”‚ Insert project   â”‚
   â”‚                       â”‚                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                       â”‚                      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚                  â”‚
   â”‚ {project data}        â”‚                      â”‚                  â”‚
```

### 3. Stripe æ”¯ä»˜æµç¨‹

```
Frontend          Gateway      Payment Service      Stripe API      Database
   â”‚                 â”‚                â”‚                  â”‚              â”‚
   â”‚ POST /checkout  â”‚                â”‚                  â”‚              â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                â”‚                  â”‚              â”‚
   â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚              â”‚
   â”‚                 â”‚                â”‚ Create Session   â”‚              â”‚
   â”‚                 â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚              â”‚
   â”‚                 â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚
   â”‚                 â”‚                â”‚ Session URL      â”‚              â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚              â”‚
   â”‚                                  â”‚                  â”‚              â”‚
   â”‚ Redirect to Stripe               â”‚                  â”‚              â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚              â”‚
   â”‚                                  â”‚                  â”‚              â”‚
   â”‚ [User completes payment]         â”‚                  â”‚              â”‚
   â”‚                                  â”‚                  â”‚              â”‚
   â”‚                                  â”‚<â”€â”€â”€ Webhook â”€â”€â”€â”€â”€â”¤              â”‚
   â”‚                                  â”‚                  â”‚              â”‚
   â”‚                                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                                  â”‚ Update subscription             â”‚
```

## æŠ€æœ¯æ ˆæ˜ å°„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Technology Stack                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Layer             â”‚ Technology                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Framework         â”‚ Spring Boot 3.3.5                        â”‚
â”‚ Microservices     â”‚ Spring Cloud 2023.x                      â”‚
â”‚ Gateway           â”‚ Spring Cloud Gateway                     â”‚
â”‚ Registry          â”‚ Nacos 2.3.0                             â”‚
â”‚ Security          â”‚ Spring Security + JWT                    â”‚
â”‚ Database          â”‚ PostgreSQL (Supabase)                   â”‚
â”‚ ORM               â”‚ MyBatis-Plus 3.5.5                      â”‚
â”‚ Payment           â”‚ Stripe Java SDK 24.0.0                  â”‚
â”‚ Language          â”‚ Java 17                                 â”‚
â”‚ Build Tool        â”‚ Maven 3.6+                              â”‚
â”‚ Container         â”‚ Docker                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ç«¯å£åˆ†é…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Service          â”‚ Port   â”‚ Description                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Frontend         â”‚ 5173   â”‚ React Development Server   â”‚
â”‚ Nacos            â”‚ 8848   â”‚ Service Registry           â”‚
â”‚ blade-gateway    â”‚ 9999   â”‚ API Gateway                â”‚
â”‚ blade-auth       â”‚ 8100   â”‚ Authentication Service     â”‚
â”‚ vision-user      â”‚ 8101   â”‚ User Management Service    â”‚
â”‚ vision-project   â”‚ 8102   â”‚ Project/Team/API Service   â”‚
â”‚ vision-payment   â”‚ 8103   â”‚ Payment Service            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ•°æ®æµå‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Data Flow                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Authentication Flow:
   Frontend â†’ Gateway â†’ Auth â†’ Database â†’ Auth â†’ Gateway â†’ Frontend

2. User Operations:
   Frontend â†’ Gateway â†’ User Service â†’ Database â†’ User Service â†’ Gateway â†’ Frontend

3. Project Operations:
   Frontend â†’ Gateway â†’ Project Service â†’ Database â†’ Project Service â†’ Gateway â†’ Frontend

4. Payment Flow:
   Frontend â†’ Gateway â†’ Payment â†’ Stripe â†’ Payment â†’ Database â†’ Payment â†’ Gateway â†’ Frontend

5. Service Registration:
   Each Service â†’ Nacos (heartbeat)

6. Service Discovery:
   Gateway â†’ Nacos (query service instances)
```

## å®‰å…¨æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Security Layers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                           â”‚
â”‚  1. Network Layer                                        â”‚
â”‚     - HTTPS/TLS encryption                               â”‚
â”‚     - CORS policy                                        â”‚
â”‚                                                           â”‚
â”‚  2. Gateway Layer                                        â”‚
â”‚     - Rate limiting (å¯æ‰©å±•)                              â”‚
â”‚     - Request validation                                 â”‚
â”‚                                                           â”‚
â”‚  3. Authentication Layer                                 â”‚
â”‚     - JWT Token validation                               â”‚
â”‚     - Token expiration check                             â”‚
â”‚     - Refresh token mechanism                            â”‚
â”‚                                                           â”‚
â”‚  4. Authorization Layer                                  â”‚
â”‚     - Role-based access control                          â”‚
â”‚     - Resource ownership validation                      â”‚
â”‚                                                           â”‚
â”‚  5. Data Layer                                           â”‚
â”‚     - Password encryption (BCrypt)                       â”‚
â”‚     - API key hashing (SHA-256)                          â”‚
â”‚     - SQL injection prevention                           â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ‰©å±•æ€§è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Scalability â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                           â”‚
â”‚  Horizontal Scaling:                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚ Svc1 â”‚  â”‚ Svc1 â”‚  â”‚ Svc1 â”‚  â† Multiple instances    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚      â–²         â–²         â–²                              â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚              â”‚                                           â”‚
â”‚      Load Balancer (Gateway)                            â”‚
â”‚                                                           â”‚
â”‚  Service Discovery:                                      â”‚
â”‚  - Auto registration                                     â”‚
â”‚  - Health checks                                         â”‚
â”‚  - Load balancing                                        â”‚
â”‚                                                           â”‚
â”‚  Database:                                               â”‚
â”‚  - Read replicas                                         â”‚
â”‚  - Connection pooling                                    â”‚
â”‚  - Query optimization                                    â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**æ¶æ„ç‰ˆæœ¬**: 1.0.0
**æœ€åæ›´æ–°**: 2024-12-26
**è®¾è®¡åŸåˆ™**: é«˜å†…èšã€ä½è€¦åˆã€å¯æ‰©å±•ã€é«˜å¯ç”¨
